<div class="flex flex-col mx-10">
  <p class="text-xl font-bold">
    <span class="text-[#707070]">Accueil / Produits /</span>
    Listes ({{ totalItems }})
  </p>

  <div class="flex flex-col min-h-100 bg-white rounded-lg p-4 gap-4 mt-8">
    <p class="font-bold mt-4 text-blue-500">Produits</p>

    <div class="w-full h-[1px] custom-shadow bg-[#D1D8EB]"></div>

    <div class="flex md:flex-row flex-col justify-between gap-2">
      <div class="flex flex-row gap-2">
        <button
          class="bg-blue-500 rounded-lg px-4 py-2 cursor-pointer"
          (click)="openCreateUserDialog()"
        >
          <div class="flex flex-row items-center gap-2">
            <svg
              width="18"
              height="18"
              viewBox="0 0 18 18"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M9 3.75V14.25"
                stroke="white"
                stroke-width="1.5"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <path
                d="M3.75 9H14.25"
                stroke="white"
                stroke-width="1.5"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
            <div class="text-white">Nouvel produit</div>
          </div>
        </button>
      </div>
    </div>

    <div class="flex flex-col gap-2">
      <div class="overflow-x-auto">
        <table class="w-full border-collapse">
          <thead>
            <tr>
              <!-- <th class="p-2 border-b text-left">Image</th> -->
              <th class="p-2 border-b text-left">Nom de l'article</th>
              <th class="p-2 border-b text-left">Description</th>
              <th class="p-2 border-b text-left">Prix</th>
              <th class="p-2 border-b text-left">Stock</th>
              <th class="p-2 border-b text-left">Ajouter par</th>
              <th class="p-2 border-b text-left">Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr
              *ngFor="let product of paginatedProducts"
              class="border-b border-gray-300"
            >
              <!-- <td class="p-2"> -->

              <td class="p-2">{{ product.name }}</td>
              <td class="p-2">{{ product.description }}</td>
              <td class="p-2">{{ product.price }}</td>
              <td class="p-2">{{ product.stock }}</td>
              <td class="p-2">{{ product.owner.name }}</td>

              <td class="p-2">
                <div class="flex flex-row gap-2">
                  <div
                    class="cursor-pointer"
                    (click)="openEditUserDialog(product)"
                  >
                    <svg
                      width="22"
                      height="22"
                      viewBox="0 0 22 22"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M8.25008 6.41602H5.50008C4.48756 6.41602 3.66675 7.23683 3.66675 8.24935V16.4993C3.66675 17.5119 4.48756 18.3327 5.50008 18.3327H13.7501C14.7626 18.3327 15.5834 17.5119 15.5834 16.4993V13.7493"
                        stroke="#4B465C"
                        stroke-width="1.5"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                      <path
                        d="M8.25008 6.41602H5.50008C4.48756 6.41602 3.66675 7.23683 3.66675 8.24935V16.4993C3.66675 17.5119 4.48756 18.3327 5.50008 18.3327H13.7501C14.7626 18.3327 15.5834 17.5119 15.5834 16.4993V13.7493"
                        stroke="white"
                        stroke-opacity="0.2"
                        stroke-width="1.5"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                      <path
                        d="M8.25 13.7499H11L18.7917 5.95822C19.5511 5.19882 19.5511 3.96761 18.7917 3.20822C18.0323 2.44882 16.8011 2.44882 16.0417 3.20822L8.25 10.9999V13.7499"
                        stroke="#4B465C"
                        stroke-width="1.5"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                      <path
                        d="M8.25 13.7499H11L18.7917 5.95822C19.5511 5.19882 19.5511 3.96761 18.7917 3.20822C18.0323 2.44882 16.8011 2.44882 16.0417 3.20822L8.25 10.9999V13.7499"
                        stroke="white"
                        stroke-opacity="0.2"
                        stroke-width="1.5"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                      <path
                        d="M14.6667 4.58398L17.4167 7.33398"
                        stroke="#4B465C"
                        stroke-width="1.5"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                      <path
                        d="M14.6667 4.58398L17.4167 7.33398"
                        stroke="white"
                        stroke-opacity="0.2"
                        stroke-width="1.5"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                    </svg>
                  </div>
                  <div class="cursor-pointer" (click)="goToViewProduct(product)">
                    <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M1 11C1 11 4 4 11 4C18 4 21 11 21 11C21 11 18 18 11 18C4 18 1 11 1 11Z" 
                            stroke="#4B465C" 
                            stroke-width="1.5" 
                            stroke-linecap="round" 
                            stroke-linejoin="round"/>
                      <path d="M11 15C13.2091 15 15 13.2091 15 11C15 8.79086 13.2091 7 11 7C8.79086 7 7 8.79086 7 11C7 13.2091 8.79086 15 11 15Z" 
                            stroke="#4B465C" 
                            stroke-width="1.5" 
                            stroke-linecap="round" 
                            stroke-linejoin="round"/>
                      <circle cx="11" cy="11" r="2" fill="#4B465C"/>
                    </svg>
                  </div>
                  <div
                    class="cursor-pointer"
                    (click)="deleteProduct(product.id)"
                  >
                    <svg
                      width="22"
                      height="22"
                      viewBox="0 0 22 22"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M3.66675 6.41732H18.3334"
                        stroke="#4B465C"
                        stroke-width="1.5"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                      <path
                        d="M3.66675 6.41732H18.3334"
                        stroke="white"
                        stroke-opacity="0.2"
                        stroke-width="1.5"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                      <path
                        d="M9.16659 10.084V15.584"
                        stroke="#4B465C"
                        stroke-width="1.5"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                      <path
                        d="M9.16659 10.084V15.584"
                        stroke="white"
                        stroke-opacity="0.2"
                        stroke-width="1.5"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                      <path
                        d="M12.8333 10.084V15.584"
                        stroke="#4B465C"
                        stroke-width="1.5"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                      <path
                        d="M12.8333 10.084V15.584"
                        stroke="white"
                        stroke-opacity="0.2"
                        stroke-width="1.5"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                      <path
                        d="M4.58325 6.41602L5.49992 17.416C5.49992 18.4285 6.32073 19.2493 7.33325 19.2493H14.6666C15.6791 19.2493 16.4999 18.4285 16.4999 17.416L17.4166 6.41602"
                        stroke="#4B465C"
                        stroke-width="1.5"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                      <path
                        d="M4.58325 6.41602L5.49992 17.416C5.49992 18.4285 6.32073 19.2493 7.33325 19.2493H14.6666C15.6791 19.2493 16.4999 18.4285 16.4999 17.416L17.4166 6.41602"
                        stroke="white"
                        stroke-opacity="0.2"
                        stroke-width="1.5"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                      <path
                        d="M8.25 6.41667V3.66667C8.25 3.16041 8.66041 2.75 9.16667 2.75H12.8333C13.3396 2.75 13.75 3.16041 13.75 3.66667V6.41667"
                        stroke="#4B465C"
                        stroke-width="1.5"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                      <path
                        d="M8.25 6.41667V3.66667C8.25 3.16041 8.66041 2.75 9.16667 2.75H12.8333C13.3396 2.75 13.75 3.16041 13.75 3.66667V6.41667"
                        stroke="white"
                        stroke-opacity="0.2"
                        stroke-width="1.5"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                    </svg>
                  </div>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="flex justify-between items-center mt-4">
        <div>
          Affichage de {{ (currentPage - 1) * itemsPerPage + 1 }} à
          {{ getMinValue(currentPage * itemsPerPage, totalItems) }} sur
          {{ totalItems }} éléments
        </div>

        <div class="flex gap-2">
          <button
            (click)="changePage(currentPage - 1)"
            [disabled]="currentPage === 1"
            class="px-4 py-2 rounded bg-gray-200 disabled:opacity-50"
          >
            Précédent
          </button>

          <ng-container *ngFor="let page of getPageNumbers()">
            <button
              (click)="changePage(page)"
              [class.bg-blue-500]="currentPage === page"
              [class.text-white]="currentPage === page"
              class="px-4 py-2 rounded"
            >
              {{ page }}
            </button>
          </ng-container>

          <button
            (click)="changePage(currentPage + 1)"
            [disabled]="currentPage === totalPages"
            class="px-4 py-2 rounded bg-gray-200 disabled:opacity-50"
          >
            Suivant
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
